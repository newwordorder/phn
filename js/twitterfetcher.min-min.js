/*********************************************************************
*  #### Twitter Post Fetcher v17.0.0 ####
*  Coded by Jason Mayes 2015. A present to all the developers out there.
*  www.jasonmayes.com
*  Please keep this disclaimer with my code if you use it. Thanks. :-)
*  Got feedback or questions, ask here:
*  http://www.jasonmayes.com/projects/twitterApi/
*  Github: https://github.com/jasonmayes/Twitter-Post-Fetcher
*  Updates will be posted to this site.
*********************************************************************/
!function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():t()}(this,function(){function y(e){if(null===l){for(var t=e.length,i=0,n=document.getElementById(a),s="<ul>";i<t;)s+="<li>"+e[i]+"</li>",i++;s+="</ul>",n.innerHTML=s}else l(e)}function _(e){return e.replace(/<b[^>]*>(.*?)<\/b>/gi,function(e,t){return t}).replace(/class="(?!(tco-hidden|tco-display|tco-ellipsis))+.*?"|data-query-source=".*?"|dir=".*?"|rel=".*?"/gi,"")}function T(e){for(var t=e.getElementsByTagName("a"),i=t.length-1;0<=i;i--)t[i].setAttribute("target","_blank")}function k(e,t){for(var i=[],n=new RegExp("(^| )"+t+"( |$)"),s=e.getElementsByTagName("*"),a=0,l=s.length;a<l;a++)n.test(s[a].className)&&i.push(s[a]);return i}function C(e){if(void 0!==e&&0<=e.innerHTML.indexOf("data-srcset")){var t=e.innerHTML.match(/data-srcset="([A-z0-9%_\.-]+)/i)[0];return decodeURIComponent(t).split('"')[1]}}var a="",N=20,x=!0,E=[],I=!1,A=!0,B=!0,L=null,M=!0,H=!0,l=null,R=!0,P=!1,U=!0,i="en",F=!0,O=!1,n=null,e=!1,$={fetch:function(e){if(void 0===e.maxTweets&&(e.maxTweets=20),void 0===e.enableLinks&&(e.enableLinks=!0),void 0===e.showUser&&(e.showUser=!0),void 0===e.showTime&&(e.showTime=!0),void 0===e.dateFunction&&(e.dateFunction="default"),void 0===e.showRetweet&&(e.showRetweet=!0),void 0===e.customCallback&&(e.customCallback=null),void 0===e.showInteraction&&(e.showInteraction=!0),void 0===e.showImages&&(e.showImages=!1),void 0===e.linksInNewWindow&&(e.linksInNewWindow=!0),void 0===e.showPermalinks&&(e.showPermalinks=!0),void 0===e.dataOnly&&(e.dataOnly=!1),I)E.push(e);else{I=!0,a=e.domId,N=e.maxTweets,x=e.enableLinks,B=e.showUser,A=e.showTime,H=e.showRetweet,L=e.dateFunction,l=e.customCallback,R=e.showInteraction,P=e.showImages,U=e.linksInNewWindow,F=e.showPermalinks,O=e.dataOnly;var t=document.getElementsByTagName("head")[0];null!==n&&t.removeChild(n),(n=document.createElement("script")).type="text/javascript",void 0!==e.list?n.src="https://syndication.twitter.com/timeline/list?callback=__twttrf.callback&dnt=false&list_slug="+e.list.listSlug+"&screen_name="+e.list.screenName+"&suppress_response_codes=true&lang="+(e.lang||i)+"&rnd="+Math.random():void 0!==e.profile?n.src="https://syndication.twitter.com/timeline/profile?callback=__twttrf.callback&dnt=false&screen_name="+e.profile.screenName+"&suppress_response_codes=true&lang="+(e.lang||i)+"&rnd="+Math.random():void 0!==e.likes?n.src="https://syndication.twitter.com/timeline/likes?callback=__twttrf.callback&dnt=false&screen_name="+e.likes.screenName+"&suppress_response_codes=true&lang="+(e.lang||i)+"&rnd="+Math.random():n.src="https://cdn.syndication.twimg.com/widgets/timelines/"+e.id+"?&lang="+(e.lang||i)+"&callback=__twttrf.callback&suppress_response_codes=true&rnd="+Math.random(),t.appendChild(n)}},callback:function(e){function t(e){var t=e.getElementsByTagName("img")[0];return t.src=t.getAttribute("data-src-2x"),e}if(void 0===e||void 0===e.body)return I=!1,void(0<E.length&&($.fetch(E[0]),E.splice(0,1)));e.body=e.body.replace(/(<img[^c]*class="Emoji[^>]*>)|(<img[^c]*class="u-block[^>]*>)/g,""),P||(e.body=e.body.replace(/(<img[^c]*class="NaturalImage-image[^>]*>|(<img[^c]*class="CroppedImage-image[^>]*>))/g,"")),B||(e.body=e.body.replace(/(<img[^c]*class="Avatar"[^>]*>)/g,""));var i=document.createElement("div");i.innerHTML=e.body,void 0===i.getElementsByClassName&&(M=!1);var n=[],s=[],a=[],l=[],r=[],o=[],c=[],d=0;if(M)for(var m=i.getElementsByClassName("timeline-Tweet");d<m.length;)0<m[d].getElementsByClassName("timeline-Tweet-retweetCredit").length?r.push(!0):r.push(!1),(!r[d]||r[d]&&H)&&(n.push(m[d].getElementsByClassName("timeline-Tweet-text")[0]),o.push(m[d].getAttribute("data-tweet-id")),B&&s.push(t(m[d].getElementsByClassName("timeline-Tweet-author")[0])),a.push(m[d].getElementsByClassName("dt-updated")[0]),c.push(m[d].getElementsByClassName("timeline-Tweet-timestamp")[0]),void 0!==m[d].getElementsByClassName("timeline-Tweet-media")[0]?l.push(m[d].getElementsByClassName("timeline-Tweet-media")[0]):l.push(void 0)),d++;else for(var m=k(i,"timeline-Tweet");d<m.length;)0<k(m[d],"timeline-Tweet-retweetCredit").length?r.push(!0):r.push(!1),(!r[d]||r[d]&&H)&&(n.push(k(m[d],"timeline-Tweet-text")[0]),o.push(m[d].getAttribute("data-tweet-id")),B&&s.push(t(k(m[d],"timeline-Tweet-author")[0])),a.push(k(m[d],"dt-updated")[0]),c.push(k(m[d],"timeline-Tweet-timestamp")[0]),void 0!==k(m[d],"timeline-Tweet-media")[0]?l.push(k(m[d],"timeline-Tweet-media")[0]):l.push(void 0)),d++;n.length>N&&(n.splice(N,n.length-N),s.splice(N,s.length-N),a.splice(N,a.length-N),r.splice(N,r.length-N),l.splice(N,l.length-N),c.splice(N,c.length-N));var p=[],d=n.length,u=0;if(O)for(;u<d;)p.push({tweet:n[u].innerHTML,author:s[u]?s[u].innerHTML:"Unknown Author",time:a[u].textContent,timestamp:a[u].getAttribute("datetime").replace("+0000","Z").replace(/([\+\-])(\d\d)(\d\d)/,"$1$2:$3"),image:C(l[u]),rt:r[u],tid:o[u],permalinkURL:void 0===c[u]?"":c[u].href}),u++;else for(;u<d;){if("string"!=typeof L){var h=a[u].getAttribute("datetime"),g=new Date(a[u].getAttribute("datetime").replace(/-/g,"/").replace("T"," ").split("+")[0]),w=L(g,h);if(a[u].setAttribute("aria-label",w),n[u].textContent)if(M)a[u].textContent=w;else{var f=document.createElement("p"),v=document.createTextNode(w);f.appendChild(v),f.setAttribute("aria-label",w),a[u]=f}else a[u].textContent=w}var b="";x?(U&&(T(n[u]),B&&T(s[u])),B&&(b+='<div class="user">'+_(s[u].innerHTML)+"</div>"),b+='<p class="tweet">'+_(n[u].innerHTML)+"</p>",A&&(b+=F?'<p class="timePosted"><a href="'+c[u]+'">'+a[u].getAttribute("aria-label")+"</a></p>":'<p class="timePosted">'+a[u].getAttribute("aria-label")+"</p>")):(n[u].textContent,B&&(b+='<p class="user">'+s[u].textContent+"</p>"),b+='<p class="tweet">'+n[u].textContent+"</p>",A&&(b+='<p class="timePosted">'+a[u].textContent+"</p>")),R&&(b+='<p class="interact"><a href="https://twitter.com/intent/tweet?in_reply_to='+o[u]+'" class="twitter_reply_icon"'+(U?' target="_blank">':">")+'Reply</a><a href="https://twitter.com/intent/retweet?tweet_id='+o[u]+'" class="twitter_retweet_icon"'+(U?' target="_blank">':">")+'Retweet</a><a href="https://twitter.com/intent/favorite?tweet_id='+o[u]+'" class="twitter_fav_icon"'+(U?' target="_blank">':">")+"Favorite</a></p>"),P&&void 0!==l[u]&&void 0!==C(l[u])&&(b+='<div class="media"><img src="'+C(l[u])+'" alt="Image from tweet" /></div>'),P?p.push(b):!P&&n[u].textContent.length&&p.push(b),u++}y(p),I=!1,0<E.length&&($.fetch(E[0]),E.splice(0,1))}};return window.__twttrf=$,window.twitterFetcher=$});