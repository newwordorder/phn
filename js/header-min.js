var js={};!function(h){h.fn.exists=function(){return 0<h(this).length},js.model={events:{},extend:function(e){var s=h.extend({},this,e);return h.each(s.events,function(e,t){s._add_event(e,t)}),s},_add_event:function(e,t){var s=this,i=e,o="",a=document;0<e.indexOf(" ")&&(i=e.substr(0,e.indexOf(" ")),o=e.substr(e.indexOf(" ")+1)),"resize"!=i&&"scroll"!=i||(a=window),h(a).on(i,o,function(e){e.$el=h(this),"function"==typeof s.event&&(e=s.event(e)),s[t].apply(s,[e])})}},js.global=js.model.extend({events:{ready:"ready"},ready:function(){h("#content iframe").each(function(){h(this).wrap('<div class="embed-container post-content-embed"></div>')})}}),js.mobile=js.model.extend({events:{"click #mobile-nav-toggle":"toggle_mobile_nav"},toggle_mobile_nav:function(e){e.preventDefault(),h("#header").toggleClass("-open")}}),js.prism=js.model.extend({events:{ready:"ready","click .pre-title":"toggle"},toggle:function(e){$code=e.$el.parent(),$code.hasClass("closed")?$code.removeClass("closed"):$code.addClass("closed")},ready:function(){h("pre code").each(function(){var e="default",t=h(this).html();t=t.trim(),h(this).html(t),!1!==t.indexOf("php")&&(e="php"),h(this).addClass("language-"+e)})}}),js.header=js.model.extend({$header:null,$sub_header:null,active:0,hover:0,show:0,y:0,opacity:1,direction:"down",events:{ready:"ready",scroll:"scroll","mouseenter #header":"mouseenter","mouseleave #header":"mouseleave"},ready:function(){this.$header=h("#header"),this.$sub_header=h("#sub-header"),this.active=1},mouseenter:function(){var e=h(window).scrollTop();this.hover=1,this.opacity=1,this.show=e,this.$header.stop().animate({opacity:1},250)},mouseleave:function(){this.hover=0},scroll:function(){if(this.active){var e=h(window).scrollTop(),t=e>=this.y?"down":"up",s=t!==this.direction,i=e-this.y,o=this.$sub_header.outerHeight();clearTimeout(this.t),e<70&&this.$header.removeClass("-white"),s&&(0==this.opacity&&"up"==t?(this.show=e)<o?this.show=0:this.show-=70:1==this.opacity&&"down"==t&&(this.show=e),this.show=Math.max(0,this.show)),this.$header.hasClass("-open")&&(this.show=e),this.hover&&(this.show=e);var a=e-this.show;a=Math.max(0,a);var l=(70-(a=Math.min(a,70)))/70;this.$header.css("opacity",l),o<e?this.$header.addClass("-white"):0==l&&this.$header.removeClass("-white"),this.y=e,this.direction=t,this.opacity=l}}}),js.tooltip=js.model.extend({$el:null,events:{"mouseenter [title]":"mouseenter","mouseleave [title]":"mouseleave"},mouseenter:function(e){var t=e.$el.attr("title");t&&(this.$el=h('<div class="tooltip">'+t+"</div>"),h("body").append(this.$el),this.$el.css({top:e.$el.offset().top-this.$el.outerHeight()-6,left:e.$el.offset().left+e.$el.outerWidth()/2-this.$el.outerWidth()/2}),e.$el.data("title",t),e.$el.attr("title",""))},mouseleave:function(e){this.$el&&(e.$el.attr("title",e.$el.data("title")),this.$el.remove())}}),js.zoomable=js.model.extend({$a:null,$img:null,active:!1,busy:!1,y:0,events:{ready:"ready",scroll:"scroll","click .zoomable":"_click"},ready:function(){h('a[href$=".jpg"], a[href$=".png"], a[href$=".gif"]').addClass("zoomable")},scroll:function(){if(this.active){var e=h(window).scrollTop(),t=100;(e>this.y+t||e<this.y-t)&&this.close()}},_click:function(e){if(e.preventDefault(),!this.busy){var t=this;this.$a=e.$el,this.$img=this.$a.children("img"),this.active?this.close():this.open(),this.busy=!0,setTimeout(function(){t.busy=!1},310)}}})}(jQuery);